<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Savoldi Freiland Shop</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/feather-icons"></script>

<style>
  .btn-green {
    background:#008231;
    color:white;
    transition:background 0.2s;
  }
  .btn-green:hover { background:#00691a; }

  .btn-green:focus-visible {
    outline:none;
    box-shadow:0 0 0 2px rgba(0,130,49,.35);
  }

  .btn-cart:focus-visible {
    box-shadow:none;
  }

  .product-img {
    height:160px;
    width:100%;
    object-fit:cover;
    border-radius:0.75rem;
  }

  .logo-img {
    height:65px;
    width:auto;
    object-fit:contain;
  }

  .badge {
    position:absolute;
    top:0.5rem;
    left:0.5rem;
    background:#FF3030;
    color:white;
    font-size:0.75rem;
    font-weight:600;
    padding:0.25rem 0.5rem;
    border-radius:0.25rem;
  }
</style>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-white shadow sticky top-0 z-50 p-3 flex justify-between items-center">

  <!-- LOGO (KLICK ‚Üí HOME) -->
  <img src="images/logo-new.png"
       alt="Savoldi Freiland"
       class="logo-img cursor-pointer"
       onclick="showPage('home')">

  <nav class="flex gap-2 sm:gap-3 items-center">
    <button onclick="showPage('home')" class="btn-green px-3 py-1 rounded">Home</button>
    <button onclick="showPage('shop')" class="btn-green px-3 py-1 rounded">Shop</button>
    <button onclick="showPage('contact')" class="btn-green px-3 py-1 rounded">Kontakt</button>

    <button onclick="toggleCart()"
      class="relative btn-green btn-cart px-2 py-1 rounded"
      aria-label="Warenkorb √∂ffnen">
      üõí
      <span id="cart-count"
        class="absolute -top-2 -right-2 bg-white text-[#008231] text-xs w-5 h-5 rounded-full flex items-center justify-center">
        0
      </span>
    </button>
  </nav>
</header>

<!-- CART -->
<div id="cart-overlay" class="hidden fixed inset-0 bg-black/40 z-40" onclick="toggleCart()"></div>

<div id="cart"
  class="fixed right-0 top-0 w-11/12 sm:w-80 h-full bg-white shadow-lg z-50 transform translate-x-full transition p-5 flex flex-col">
  <h2 class="text-xl font-semibold mb-4">Warenkorb</h2>
  <div id="cart-items" class="flex-1 space-y-3 overflow-y-auto"></div>
  <div class="border-t pt-3 font-semibold">Gesamt: CHF <span id="cart-total">0.00</span></div>
  <button onclick="checkout()" class="btn-green mt-4 py-2 rounded">Zur Kasse</button>
</div>

<!-- MAIN -->
<main class="flex-1 p-4 sm:p-6 space-y-12">

<!-- HOME -->
<section id="home-page"
  class="relative text-white text-center h-96 flex flex-col justify-center items-center"
  style="background-image:url('images/home-banner.jpg'); background-size:cover; background-position:center;">
  <h2 class="text-4xl font-bold mb-3 drop-shadow-lg">Frische Freilandeier</h2>
  <p class="text-lg mb-6 drop-shadow-md">Regional, nachhaltig & pers√∂nlich</p>
  <button class="btn-green px-6 py-3 rounded" onclick="showPage('shop')">Jetzt bestellen</button>
</section>

<!-- SHOP -->
<section id="shop-page" class="hidden">
  <h2 class="text-2xl font-semibold mb-6">Unsere Produkte</h2>
  <div id="products" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</section>

<!-- CONTACT -->
<section id="contact-page" class="hidden max-w-md mx-auto">
  <h2 class="text-2xl font-semibold mb-4">Kontakt</h2>
  <form id="contact-form" action="https://formspree.io/f/FORM_CONTACT_ID" method="POST" class="space-y-3">
    <input name="name" placeholder="Name" required class="w-full border p-2 rounded">
    <input name="email" type="email" placeholder="E-Mail" required class="w-full border p-2 rounded">
    <textarea name="message" placeholder="Nachricht" required class="w-full border p-2 rounded"></textarea>
    <button class="btn-green w-full py-2 rounded">Absenden</button>
  </form>
  <div id="contact-success" class="hidden text-[#008231] mt-2 font-semibold">
    Vielen Dank f√ºr deine Anfrage!
  </div>
</section>

<!-- CHECKOUT -->
<section id="checkout-page" class="hidden max-w-2xl mx-auto space-y-6">
  <h2 class="text-2xl font-semibold">Checkout</h2>

  <div class="bg-white p-4 rounded shadow">
    <h3 class="font-semibold mb-3">Bestell√ºbersicht</h3>
    <div id="checkout-summary" class="space-y-2"></div>
    <div class="border-t mt-3 pt-2 flex justify-between font-semibold">
      <span>Gesamt</span>
      <span>CHF <span id="checkout-total">0.00</span></span>
    </div>
  </div>

  <form id="checkout-form" action="https://formspree.io/f/FORM_CHECKOUT_ID" method="POST" class="space-y-3">
    <input name="name" placeholder="Name" required class="w-full border p-2 rounded">
    <input name="email" type="email" placeholder="E-Mail" required class="w-full border p-2 rounded">
    <input name="address" placeholder="Adresse" required class="w-full border p-2 rounded">

    <div class="flex gap-4">
      <label><input type="radio" name="payment" value="TWINT" checked> TWINT</label>
      <label><input type="radio" name="payment" value="Rechnung"> Rechnung</label>
    </div>

    <textarea name="order" id="order-field" class="hidden"></textarea>
    <button class="btn-green w-full py-2 rounded">Bestellung abschicken</button>
  </form>

  <div id="checkout-success" class="hidden text-[#008231] font-semibold mt-2">
    Vielen Dank f√ºr deine Bestellung!
  </div>
</section>

</main>

<!-- FOOTER -->
<footer class="bg-[#008231] text-white p-6 text-sm">
  <div class="max-w-4xl mx-auto grid sm:grid-cols-3 gap-6">
    <div>
      <h4 class="font-semibold flex items-center gap-1"><i data-feather="home"></i> √úber uns</h4>
      <p>Savoldi Freiland</p>
      <p>Ebnet 15</p>
      <p>5504 Othmarsingen</p>
    </div>
    <div>
      <h4 class="font-semibold flex items-center gap-1"><i data-feather="mail"></i> Kontakt</h4>
      <p>info@savoldi-freiland.ch</p>
      <p>+41 79 797 79 79</p>
    </div>
    <div>
      <h4 class="font-semibold flex items-center gap-1"><i data-feather="clock"></i> √ñffnungszeiten</h4>
      <p>Mo‚ÄìFr: 8:00 ‚Äì 18:00 Uhr</p>
      <p>Sa‚ÄìSo: Geschlossen</p>
    </div>
    <div>
      <h4 class="font-semibold flex items-center gap-1"><i data-feather="credit-card"></i> Zahlung</h4>
      <p>- Rechnung</p>
      <p>- TWINT</p>
    </div>
  </div>
  <p class="text-center mt-4">¬© 2026 Savoldi Freiland ¬∑ realisiert von TwoNet</p>
</footer>

<script>
feather.replace();

let cart = [];

const products = [
  { id:4, name:'Eierabo', price:null, desc:'Jede Woche frische Freilandeier direkt zu dir nach Haus geliefert.', img:'images/eier-abo.jpg', onRequest:true, badge:'Beliebt' },
  { id:1, name:'6er-Packung Freilandeier', price:4.5, desc:'Frisch vom Hof ‚Äì t√§glich genie√üen.', img:'images/eier-6er.jpg' },
  { id:2, name:'10er-Packung Freilandeier', price:7, desc:'Perfekt f√ºr die Familie.', img:'images/eier-10er.jpg' },
  { id:3, name:'30er-Packung Freilandeier', price:19.5, desc:'Vorteilspackung f√ºr grosse Haushalte.', img:'images/eier-30er.jpg' }
];

const productsEl = document.getElementById('products');

products.forEach(p=>{
  const div=document.createElement('div');
  div.className='bg-white p-4 rounded shadow relative';
  div.innerHTML=`
    ${p.badge?`<div class="badge">${p.badge}</div>`:''}
    <img src="${p.img}" alt="${p.name}" class="product-img mb-3" onerror="this.src='images/placeholder.jpg'">
    <h3 class="font-semibold">${p.name}</h3>
    <p class="text-gray-600 text-sm mb-2">${p.desc}</p>
    ${p.onRequest?`
      <label class="text-sm">Gr√∂sse:</label>
      <select id="size-${p.id}" class="w-full border p-1 rounded mb-2">
        <option>6er</option><option>10er</option><option>30er</option>
      </select>
      <p class="text-[#008231] font-semibold mb-2">Preis auf Anfrage</p>
      <button class="btn-green w-full py-2 rounded" onclick="addAbo(${p.id})">Abo anfragen</button>
    `:`
      <p class="font-semibold mb-2">CHF ${p.price.toFixed(2)}</p>
      <button class="btn-green w-full py-2 rounded" onclick="addToCart(${p.id})">In den Warenkorb</button>
    `}
  `;
  productsEl.appendChild(div);
});

function showPage(p){
  ['home','shop','contact','checkout'].forEach(x=>document.getElementById(x+'-page').classList.add('hidden'));
  document.getElementById(p+'-page').classList.remove('hidden');
}

const cartEl=document.getElementById('cart');
const overlay=document.getElementById('cart-overlay');

function toggleCart(){
  cartEl.classList.toggle('translate-x-full');
  overlay.classList.toggle('hidden');
}

function addToCart(id){
  const p=products.find(x=>x.id===id);
  const e=cart.find(x=>x.id===id);
  e ? e.qty++ : cart.push({...p,qty:1});
  renderCart();
  toggleCart();
}

function addAbo(id){
  const size=document.getElementById(`size-${id}`).value;
  cart.push({id,name:'Eierabo',size,qty:1,price:null});
  renderCart();
  toggleCart();
}

function changeQty(index,delta){
  cart[index].qty+=delta;
  if(cart[index].qty<=0) cart.splice(index,1);
  renderCart();
}

function removeItem(index){
  cart.splice(index,1);
  renderCart();
}

function renderCart(){
  let total=0;
  const el=document.getElementById('cart-items');
  el.innerHTML='';

  cart.forEach((i,index)=>{
    if(i.price) total+=i.price*i.qty;

    el.innerHTML+=`
      <div class="border-b pb-2 space-y-1">
        <strong>${i.name}</strong>

        ${i.size?`
          <div class="text-sm text-gray-500">Gr√∂sse: ${i.size}, w√∂chentlich</div>
        `:`
          <div class="flex items-center gap-2">
            <button onclick="changeQty(${index},-1)" class="px-2 border rounded">‚àí</button>
            <span>${i.qty}</span>
            <button onclick="changeQty(${index},1)" class="px-2 border rounded">+</button>
            <button onclick="removeItem(${index})" class="ml-auto text-red-500 text-sm">üóëÔ∏è Entfernen</button>
          </div>
        `}

        <div>
          ${i.price
            ? `CHF ${(i.price*i.qty).toFixed(2)}`
            : `<span class="text-[#008231]">Preis auf Anfrage</span>`
          }
        </div>
      </div>
    `;
  });

  document.getElementById('cart-total').textContent=total.toFixed(2);
  document.getElementById('cart-count').textContent=cart.reduce((a,b)=>a+b.qty,0);
}
</script>

</body>
</html>
