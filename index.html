<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Savoldi Freiland Shop</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .btn-green { background:#008231; color:white; }
    .btn-green:hover { background:#00691a; }
    .product-img { height:160px; width:100%; object-fit:cover; border-radius:0.75rem; }
  </style>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-white shadow sticky top-0 z-50 p-4 flex justify-between items-center">
  <div>
    <h1 class="text-2xl font-light">ðŸŒ¾ Savoldi Freiland</h1>
    <p class="text-sm text-gray-500">Freilandeier aus Othmarsingen</p>
  </div>
  <nav class="flex gap-3 items-center">
    <button onclick="showPage('home')">Home</button>
    <button onclick="showPage('shop')">Shop</button>
    <button onclick="showPage('contact')">Kontakt</button>
    <button onclick="toggleCart()" class="relative">
      ðŸ›’
      <span id="cart-count" class="absolute -top-2 -right-2 bg-[#008231] text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">0</span>
    </button>
  </nav>
</header>

<!-- CART -->
<div id="cart-overlay" class="hidden fixed inset-0 bg-black/40 z-40" onclick="toggleCart()"></div>
<div id="cart" class="fixed right-0 top-0 w-80 h-full bg-white shadow-lg z-50 transform translate-x-full transition p-5 flex flex-col">
  <h2 class="text-xl font-semibold mb-4">Warenkorb</h2>
  <div id="cart-items" class="flex-1 space-y-3 overflow-auto"></div>
  <div class="border-t pt-3 font-semibold">Gesamt: CHF <span id="cart-total">0.00</span></div>
  <button onclick="checkout()" class="btn-green mt-4 py-2 rounded">Zur Kasse</button>
</div>

<!-- MAIN -->
<main class="flex-1 p-6 space-y-12">

<!-- HOME -->
<section id="home-page" class="text-center">
  <h2 class="text-3xl font-semibold mb-3">Frische Freilandeier</h2>
  <p class="text-gray-600 mb-6">Regional, nachhaltig & direkt vom Hof</p>
  <button class="btn-green px-6 py-3 rounded" onclick="showPage('shop')">Jetzt bestellen</button>
</section>

<!-- SHOP -->
<section id="shop-page" class="hidden">
  <h2 class="text-2xl font-semibold mb-6">Unsere Produkte</h2>
  <div id="products" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</section>

<!-- CONTACT -->
<section id="contact-page" class="hidden max-w-md mx-auto">
  <h2 class="text-2xl font-semibold mb-4">Kontakt</h2>
  <form action="https://formspree.io/f/FORM_CONTACT_ID" method="POST" class="space-y-3">
    <input name="name" placeholder="Name" class="w-full border p-2 rounded" required>
    <input name="email" type="email" placeholder="E-Mail" class="w-full border p-2 rounded" required>
    <textarea name="message" placeholder="Nachricht" class="w-full border p-2 rounded" required></textarea>
    <button class="btn-green w-full py-2 rounded">Absenden</button>
  </form>
</section>

<!-- CHECKOUT -->
<section id="checkout-page" class="hidden max-w-2xl mx-auto space-y-6">
  <h2 class="text-2xl font-semibold">Checkout</h2>

  <div class="bg-white p-4 rounded shadow">
    <h3 class="font-semibold mb-3">BestellÃ¼bersicht</h3>
    <div id="checkout-summary" class="space-y-2"></div>
    <div class="border-t mt-3 pt-2 flex justify-between font-semibold">
      <span>Gesamt</span>
      <span>CHF <span id="checkout-total">0.00</span></span>
    </div>
  </div>

  <form id="checkout-form" action="https://formspree.io/f/FORM_CHECKOUT_ID" method="POST" class="space-y-3">
    <input name="name" placeholder="Name" class="w-full border p-2 rounded" required>
    <input name="email" type="email" placeholder="E-Mail" class="w-full border p-2 rounded" required>
    <input name="address" placeholder="Adresse" class="w-full border p-2 rounded" required>

    <div class="flex gap-4">
      <label><input type="radio" name="payment" value="TWINT" checked> TWINT</label>
      <label><input type="radio" name="payment" value="Rechnung"> Rechnung</label>
    </div>

    <textarea name="order" id="order-field" class="hidden"></textarea>
    <button class="btn-green w-full py-2 rounded">Bestellung abschicken</button>
  </form>
</section>

</main>

<!-- FOOTER -->
<footer class="bg-blue-900 text-white p-6 text-sm">
  <div class="max-w-4xl mx-auto grid sm:grid-cols-3 gap-6">
    <div><strong>Savoldi Freiland</strong><br>Frische Freilandeier aus Othmarsingen</div>
    <div><strong>Kontakt</strong><br>Othmarsingen<br>info@savoldi-freiland.ch</div>
    <div><strong>Ã–ffnungszeiten</strong><br>Moâ€“Fr 8â€“18 Uhr<br>Sa 8â€“14 Uhr</div>
  </div>
  <p class="text-center mt-4">Â© 2026 Savoldi Freiland</p>
</footer>

<script>
let cart = [];

const products = [
  { id:1, name:'6er Freilandeier', price:4.5, desc:'Frische Eier aus Freilandhaltung.', img:'https://images.unsplash.com/photo-1617635581526-0c6dbd1a7e95?w=400' },
  { id:2, name:'10er Freilandeier', price:7, desc:'Ideal fÃ¼r Familien.', img:'https://images.unsplash.com/photo-1584270354949-2b720f097319?w=400' },
  { id:3, name:'30er Freilandeier', price:19.5, desc:'Vorteilspackung.', img:'https://images.unsplash.com/photo-1617635581526-0c6dbd1a7e95?w=400' },
  { id:4, name:'Eierabo', price:null, desc:'WÃ¶chentliche Lieferung frischer Eier.', img:'https://images.unsplash.com/photo-1589927986089-35812386c32a?w=400', onRequest:true }
];

const productsEl = document.getElementById('products');

products.forEach(p => {
  const div = document.createElement('div');
  div.className = 'bg-white p-4 rounded shadow';
  div.innerHTML = `
    <img src="${p.img}" class="product-img mb-3">
    <h3 class="font-semibold">${p.name}</h3>
    <p class="text-gray-600 text-sm mb-2">${p.desc}</p>

    ${
      p.onRequest
      ? `
        <label class="text-sm">GrÃ¶ÃŸe:</label>
        <select id="size-${p.id}" class="w-full border p-1 rounded mb-2">
          <option>6er</option>
          <option>10er</option>
          <option>30er</option>
        </select>
        <p class="text-[#008231] font-semibold mb-2">Preis auf Anfrage</p>
        <button class="btn-green w-full py-2 rounded" onclick="addAbo(${p.id})">Abo anfragen</button>
      `
      : `
        <p class="font-semibold mb-2">CHF ${p.price.toFixed(2)}</p>
        <button class="btn-green w-full py-2 rounded" onclick="addToCart(${p.id})">In den Warenkorb</button>
      `
    }
  `;
  productsEl.appendChild(div);
});

function showPage(p){['home','shop','contact','checkout'].forEach(x=>document.getElementById(x+'-page').classList.add('hidden'));document.getElementById(p+'-page').classList.remove('hidden');}
function toggleCart(){cartEl.classList.toggle('translate-x-full');overlay.classList.toggle('hidden');}

const cartEl=document.getElementById('cart'), overlay=document.getElementById('cart-overlay');

function addToCart(id){
  const p=products.find(x=>x.id===id);
  const e=cart.find(x=>x.id===id);
  e?e.qty++:cart.push({...p,qty:1});
  renderCart();toggleCart();
}

function addAbo(id){
  const size=document.getElementById(`size-${id}`).value;
  cart.push({id,name:'Eierabo',size,qty:1,price:null});
  renderCart();toggleCart();
}

function renderCart(){
  let total=0;
  const el=document.getElementById('cart-items');el.innerHTML='';
  cart.forEach(i=>{
    if(i.price) total+=i.price*i.qty;
    el.innerHTML+=`
      <div class="border-b pb-2">
        <strong>${i.name}</strong>
        ${i.size?`<div class="text-sm text-gray-500">GrÃ¶ÃŸe: ${i.size}, wÃ¶chentlich</div>`:''}
        <div>${i.price?`CHF ${(i.price*i.qty).toFixed(2)}`:'<span class="text-[#008231]">Preis auf Anfrage</span>'}</div>
      </div>`;
  });
  document.getElementById('cart-total').textContent=total.toFixed(2);
  document.getElementById('cart-count').textContent=cart.reduce((a,b)=>a+b.qty,0);
}

function checkout(){showPage('checkout');toggleCart();updateCheckout();}
function updateCheckout(){
  let total=0;
  const el=document.getElementById('checkout-summary');el.innerHTML='';
  cart.forEach(i=>{
    if(i.price){total+=i.price*i.qty;el.innerHTML+=`<div class="flex justify-between"><span>${i.name}</span><span>CHF ${(i.price*i.qty).toFixed(2)}</span></div>`;}
    else{el.innerHTML+=`<div class="flex justify-between text-[#008231]"><span>${i.name} (${i.size}, wÃ¶chentlich)</span><span>Preis auf Anfrage</span></div>`;}
  });
  document.getElementById('checkout-total').textContent=total.toFixed(2);
}

document.getElementById('checkout-form').addEventListener('submit',()=>{
  document.getElementById('order-field').value =
    cart.map(i=>i.price?`${i.name}`:`${i.name} (${i.size}, wÃ¶chentlich) â€“ Preis auf Anfrage`).join('\n');
});
</script>

</body>
</html>
